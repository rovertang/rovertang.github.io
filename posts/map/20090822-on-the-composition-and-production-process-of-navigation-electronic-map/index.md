# 浅谈导航电子地图的组成和制作流程


这是四维公司在周四的时候做的一个小小的活动(由于一直有点忙，所以今天才整理此篇文章)，主要是讨论行人导航地图的应用与发展。由于我们经理比较忙，所以就让我过去看看。这次活动在蓝色港湾酒吧一条街的全明星运动餐厅(All Star)举行，环境还非常不错。

![](assets/boxcnjY106eOaghPOZFWlijGFeg.jpg)

不过虽然说是一次产品推荐产品探讨，但请的全部都是媒体，泡泡啊中关村在线啊IT168啊爱卡啊等等都有到场，就我们是合作伙伴，感觉有点怪不过也算荣幸。当然到场的记者朋友们也比较熟，谁让我也算是在市场部门呢，公司与媒体的沟通合作自然是少不了的。沙龙的气氛非常的不错，主要是环境确实挺好。

![](assets/boxcn1UQagkZGn2Oqvs0a2c6I0b.jpg)

虽然说沙龙上主要是行人导航地图的介绍，但也讲了比较多的其他的内容，首先当然介绍了一下公司，四维公司在今年上半年又是一个非常不错的佳绩，上半年的前装市场占据了67.79%，前装市场四维公司独大当然是没得说的，当然剩下的份额基本上是高德占据，这是在前装市场处于垄断地位的两家公司。而在手机市场四维公司占据了60.47%的份额，这一点Nokia的功劳肯定是不小的，出厂预装Nokia Map就已经占据了非常大的市场了。

另外在互联网市场在08年达到了74%，可以说又是四维独大了，想想也是，除了Google使用高德公司的地图外，其余能叫上名的基本都是选择四维公司地图，当然现在没落的51地图另说，而互联网地图上占据较大市场份额(这一点我没有考证，但我所看到许多网站的应用基本上是Mapbar的，特别是以前搞城市代理和联盟的形式市场拓展比较好，当然现在Google Maps API日渐流行这部分市场Mapbar的份额将会减少)的MapBar选用的就是，而搜狗地图、微软地图(微软的地图我很少用)等等等都是四维公司的数据。

这次沙龙上比较感兴趣的是讲解导航电子地图的制作流程，以前一直想写一篇导航电子地图的介绍(主要是讲导航地图的数据组织和如何制作)，我想今天可以拿四维公司的导航电子地图制作流程作为开始了。我做了一下简单的记录，所以就简单讲上几点个人觉得挺不错的地方。

## 地图的演变

首先是地图的演变或者区隔，简单的地图两字但内容真是千差万别，有纸质地图，纸质地图肯定是最早的地图了，因为计算机或者显示器才一百年的历史都不到(我说的没错吧)，而在这个的时代才会有所谓的栅格地图了吧，大家可能看到的比较多的也是栅格地图，简单的来说，就是将一份纸质的城市地图扫描到电脑，在电脑上看到的图片就算是栅格地图(我的理解大概是如此)，当然甚至我们看到的Google map等都可以理解为栅格地图，因为大家都知道Google map是将地图存储为了金字塔地图图片库，只是制作这些图片使用的是矢量地图，在后台的数据库中也保存了一份强大的矢量地图内容，甚至我们经常看到的基于C/S的Webmap系统也可以理解为是栅格地图，虽然后台是矢量地图服务器，但传送到WEB端的时候在服务器端生成了临时的图片，用户看到的还是图片(对于栅格地图的理解可能有些狭隘了)。

接下来是三维模型结合遥感的卫星影像地图，这一点Google earth是最佳的推动者，虽然NASA有WW、微软有VE，但最普遍的还是Google的GE，应该说卫星影像地图也算是有很长一段历史了，只是大概出于军事使用等考虑一直没有让我们这些小老百姓看到。

最后说到的就是非常特殊的导航电子地图，这个特殊主要在于什么呢？有很多的点，比如有关系到国家保密插件问题(这个是中国的特色了)，比如导航电子地图制作的难度问题等，导航电子地图的最特殊之处在于这个地图是可以导航的(废话)，导航两字非常重要，从我们国家有十家左右的导航电子地图供应商但真正占领市场的只有四维和高德两家就能说明做导航电子地图的不容易，这也是我想写导航电子地图介绍的主因(不过这个会上基本上都讲了)。

## 导航电子地图的组成

导航电子地图从形式上看有道路、背景、注记、POI组成，当然还可以有很多的特色内容，比如像Garmin任我游产品中的3D路口实景放大图、三维建筑物等，都可以算做导航地图的特色部分，只是导航地图归根结底就这四个部分组成(矢量的电子地图不就是由点线面组成的吗)，不过不要小看这四个部分，最难的就是道路了，虽然道路就是线，但如何在这些线上进行导航(也就是路径计算)，不是一般的难(不难也不会这么多公司都做不好了)。

从功能表现上来看，导航电子地图需要有定位显示、索引、路径计算、引导的功能，不过这个讲的好像有点虚，或者说这些功能的实现除了需要导航电子地图作为依托外，也需要导航软件的支持，这四大功能可以说是导航软件的主要功能，

首先需要有一个地图显示引擎将一大片以数字标记的数据库(就是矢量地图)能够显示，而定位倒是简单的读取GPS信息的功能，索引就是查询，导航导航要有目的地才能导航，而如何确定目的地就涉及到了索引，而需要制作索引的基本上是道路和POI，当然这里的索引个人理解有所片面，仅仅理解为了名称查询功能，在路径计算的部分可能也是需要所谓的索引存在，只是这不是表象的查询功能了。

路径计算是导航电子地图的核心，许多公司做不好，很大的原因是核心做不好，所以地图市场为什么会有两家独大的局面，当然路径计算不仅仅是地图供应商的问题(主因是地图供应商)，还涉及到导航软件厂商的路径计算算法，即使同样的导航电子地图，甚至不同的公司做出来的路线是不一样的，这就要看导航软件公司的技术积累了。

路径计算是一个导航软件或者说导航产品生死的关键，数据公司责任重大啊。至于路径计算道路应该如何组织会上并没有做介绍，我们下次简单讲讲一份导航电子地图的数据组织(大概是数据规格、如何矢量化等这些方面吧)。引导功能虽然单列了出来，但个人认为和导航电子地图的关系并不算太大，更多的应该算是导航软件的功能(只是还是需要路径计算和地图属性为依托)，引导功能大概基本上表现为文字引导、地图引导和语音引导(这是个人的理解总结，当然也可以扩展，比如甚至可以加上图片引导)，举例来说吧，你在导航软件中看到的“左转到某某路”这就是文字引导，听到说“左转到某某路”这就是语音引导，而你在地图上看到的用特殊颜色表示的航线，以及在作出机动的时候的箭头指示等都理解为地图引导，航线可以说是路径计算的结果，是在地图上的表现，而在语音和文字方面的内容是需要地图属性的依托，比如上面说到的“某某路”就是地图属性，比如“右侧出口前往上海方向”，这里的上海两字就需要地图属性依托。

总的来说，不管对导航电子地图还是导航软件，用“定位显示、索引、路径计算、引导”四个词来总结还是非常到位的。

## 如何制作一份导航电子地图

导航电子地图的组成说完了，那么如何制作一份导航电子地图呢？也许大家和我一样，理解为外业采集和内业处理，严格来说也确实就这两个主要环节，

看看四维的总结吧：**规格流程确定-&gt;基础数据的收集和处理(早期通过权威资料进行参考)-&gt;实地信息采集-&gt;信息录入-&gt;实地验证-&gt;理论检查、保密审查和数据转换-&gt;封库**。

四维的总结算是非常的严谨了，我们只是抓了一些粗枝大叶。一起来细说一下这个流程总结吧。

### 规格和流程

首先是规格流程的确定，应该说这是导航电子地图的最关键的部分，上面说到的路径算法等其实都需要符合一定的规格，而制定一个规格标准更是关系到了整个导航电子地图的好坏，比如拓扑关系的组织。

虽然每家都有自己的数据规格，但易用性、全面性等考虑都不一样，比如道路路口信息的处理这一点就是比较高深的学问(至少我认为这一点不容易)。

规格算是核心中的核心了，没有规格何来数据，更是如何让导航软件公司使用数据？虽然国际上有什么GDF啊KIWI啊等规格，但国内的数据供应商还是有自己的一套制作标准，每家都有所不同，导航软件公司对数据的转换就需要解读这些数据规格。

个人觉得GDF这样的规格看的真让人眼花，不容易理解，还是国内自己定义的规格比较容易理解一些，虽然各家的定义也不一样。

基础数据的收集处理倒是我没有想到的，可能是忽略了吧，但细想也应该是必须才对，比如你要去某某地方旅游，你总会在网上找一些路线啊攻略啊什么，比如我就会先确定一下位置(时间不够的话太远肯定不会去的嘛)，然后查看一下路线，当然是否好玩等是第一位的，比如我不喜欢古迹什么的，像十三陵这样的古墓我想我是不会去的，这些所有的信息你肯定都是收集并是重要的参考，所以制作导航电子地图没有想到也是如此。

### 外业采集

实地信息采集就是我们理解为的外业采集，基本上都是车在外面跑，用GPS记录下轨迹，当然不是记录下轨迹这么简单，还有很多的信息需要采集，比如道路名称、车道信息、道路速度限制、是否单行道、是否双黄线等等等，太多的信息需要采集，这些是道路信息的外业采集，当然外业采集也包括了POI信息的采集，POI的采集可以在道路采集的过程中完成，也可以独立完成，毕竟道路作业的时候最多采集POI的名称，至于地址、电话等信息除了通过收集的资料外，有很多还是需要实际的进去询问。应该说外业采集是非常艰苦的工作，可以去看一下有篇介绍凯立德公司的外业人员一天作业跟踪的文章。

### 内业录入处理

外业采集完成后当然就需要内业的信息录入了，而内业不仅仅是字面上的录入这么简单，根据外业提供的信息录入名称等内容，而在道路限制等方面就涉及到了对规格的理解，如何在属性中体现出禁止左转这一内容，这不是根据外业简单的告知就能完成的工作，更需要对数据规格的理解。

在外业采集和内业录入的部分，有些时候甚至是可以由内业录入代替部分的外业采集，比如在拥有质量非常好的卫星影像的情况下，道路就可以按照卫星影像制作出来，只是拓扑关系还是需要外业采集。

实地验证就是对数据录入后的验证，当然导航软件公司的导航软件测试也可以认为是实地验证的一个部分。理论检查还是非常有必要的，就是按照规格，写一些工具验证属性是否符合规格，这些基本上都是必须的工作，一个连理论上都有错误的数据难道就可以直接提供给用户？而保密审查其实就是我们国家特色的一个部分，这里会涉及到许多保密内容的删除，比如军事基地，不过我们的国家似乎太过于严格了，严格到什么程度？比如北京新街口附近的二炮医院，其实都已经面向民用了但还是需要保密需要从导航电子地图数据中删除，而不对附属的幼儿园等都属于这样的情况，甚至所有的消防局，呵呵。

### 数据转换和发布

数据转换不是简单的数据格式的转换，也可以说是数据规格的转换，我们作为非地图公司的人员，能够看到的数据规格，甚至包括所谓的GDF规格，其实是已经透明的成品的规格，而其实地图公司内部本身有更加细化的规格，这一部分的规格是不对外公开的，可能也是一个公司技术核心的部分吧。

封库动作就不用讲了，但也算是四维公司严谨的一个方面吧，虽然我也认为数据公司并不严谨。封库的意思是地图数据即将发布，不再做任何的改动，这一版本的地图数据制作就算是告一段落了。

好了，今天就讲到这里吧，夜深人静花了两个小时写了这些凌乱的文字，本来写的题目是四维公司的导航地图推介沙龙，但最后改成了导航电子地图的制作，回看上面三大段确实偏离了我本来只介绍沙龙的目的，不过也好，一直想写的导航电子地图介绍就以本文来代替了，说的有点广和泛，也比较乱，但也算是给大家从头至尾讲解了一下导航电子地图是如何产生的，至于更详细的数据规格、数据处理等以后有机会再说吧。欢迎GIS界的朋友们一起交流。

本文飞书文档：[浅谈导航电子地图的组成和制作流程](https://rovertang.feishu.cn/docx/doxcnxTkd0PCsjjpllnXCqD6thh)


---

> 作者: [RoverTang](https://rovertang.com)  
> URL: http://localhost:1313/posts/map/20090822-on-the-composition-and-production-process-of-navigation-electronic-map/  

